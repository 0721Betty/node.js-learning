#### 文件读写案例

- 使用到的模块：`var fs = require('fs');`**fs模块不是全局的模块所以需要require()函数来加载该模块才能使用，全局模块可以直接使用如process模块**

1. 写文件：`fs.writeFile(file,data[,options],callback);`

   - 参数1：要写入的文件路径，**必填**
   - 参数2：要写入的数据，**必填**
   - 参数3：写入文件时的选项，比如：文件编码，选填
   - 参数4：文件写入完毕后的回调函数，**必填**

   写文件**注意**

   * 该操作采用异步执行
   * 如果文件已经存在则替换掉
   * 默认写入的文件编码为utf8
   * 回调函数有一个参数：err,表示在写入文件的操作过程中是否出错了
     - 如果出错了`err != null`,否则`err ===null`

2. 读文件：`fs.readFile(file[,options],callback);`

   - 参数1：要读取的文件路径，**必填**
   - 参数2：读取文件时的选项，比如：文件编码，选填
   - 参数3：文件读取完毕后的回调函数，**必填**
   - 回调函数有两个参数 err和data
     - 如果出错了`err != null`,否则`err ===null`
     - 当参数2中没有utf8时，data是一个Buffer对象，输出时需要用toString()方法进行转换，有utf8参数时，data就是字符串

#### 解决在文件读取中 ./相对路径的问题

##### 解决：`__dirname   __filename`（这两个变量并不是全局的）

__dirname :表示当前正在执行的 js 文件所在的目录

__filename：表示当前正在执行的js文件的完整路径

##### 注意

- 异步操作不能通过 try-catch 来捕获异常，要通过判断 error 来判断是否出错
- 同步操作可以通过  try-catch 来捕获异常
- 直接判断error来确定文件是否存在
- req与res的顺序不能反